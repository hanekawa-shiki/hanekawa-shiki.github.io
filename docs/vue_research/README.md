---
title: vue 设计与实现
icon: vue
category: 前端
tag:
  - vue
  - 源码
isOriginal: true
date: 2024-06-21
---

《vue 设计与实现》个人理解整理

<!-- more -->

## 设计思路

- 虚拟`DOM`用来描述真实`DOM`的`js`对象
- 模版`template`
  - 虚拟`DOM`比模版灵活；模版比虚拟`DOM`更加直观
- 渲染器 将虚拟`DOM`转化为真实`DOM`
- 组件 就是一组`DOM`元素的封装，本质就是虚拟`DOM`;可以是返回虚拟`DOM`的函数也可以是对象
- 编译器 将模版编译为渲染函数
  - 渲染器与编译器之间的交流 => 虚拟`DOM`
  - 编译器编译的时候可以寻找变更点，`patchFlag`

## 响应式原理

- 副作用函数 会产生副作用的函数--函数的执行会直接或间接影响其他函数的执行
- 响应式数据
- 响应式系统设计
  - 读取/设置 操作时分别对副作用函数进行收集和读取执行操作
  - 被代理对象->被操作（读取/设置）字段名->使用`effect`函数注册的副作用函数`effectFn`：三者的树形结构
    - `WeakMap`与`Map`的区别
  - 分支切换